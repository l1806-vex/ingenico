#*******************************************************************************
#* %MAKEFILE_FILE_NAME%
#*------------------------------------------------------------------------------
#* Makefile used to generate the resource binary (GNU WIN32 format).
#* This file was automatically generated by IngeDev. Please, do not edit!
#*******************************************************************************

#-------------------------------------------------------------------------------
# Include variables list set in the runtime-workspace
#-------------------------------------------------------------------------------
include vars.mk

#-------------------------------------------------------------------------------
# General constants
#-------------------------------------------------------------------------------
EMPTY :=
SPACE := $(EMPTY) $(EMPTY)

#-------------------------------------------------------------------------------
# Project and file names - updated by IngeDev
#-------------------------------------------------------------------------------
# Project name
PROJECT_NAME    = %PROJECT_NAME%
# Sub-Project name
SUB_PRJ_NAME    = %SUB_PROJECT_NAME%
# Config name
CFG_NAME        = %CONFIG_NAME%
# Target file name
TRG_FILE_NAME   = %TARGET_FILE_NAME%

#-------------------------------------------------------------------------------
# Directories - updated by IngeDev
#-------------------------------------------------------------------------------
# Binaries directory
BIN_DIR         = %BIN_DIR%

#-------------------------------------------------------------------------------
# Input files path for the current sub-project in the current config
#-------------------------------------------------------------------------------
# ingRC JAR file path and name
INGRC_JAR_FILE  = $(JAR_FILES_PATH)/ingRC.jar

#-------------------------------------------------------------------------------
# Output files path for the current sub-project in the current config
#-------------------------------------------------------------------------------
# Binary files path
BIN_PATH        = $(BIN_DIR)/$(CFG_NAME)

#-------------------------------------------------------------------------------
# Gnu Win32 tools
#-------------------------------------------------------------------------------
# Remove tool
RM              = rm.exe -fr
# Make directory tool
MKDIR           = mkdir.exe -p
# Printf tool
PRINTF          = printf.exe

#-------------------------------------------------------------------------------
# Ingenico tools
#-------------------------------------------------------------------------------
# Resource compiler tool
RC              = "$(JRE_BIN_PATH)/java" -jar "$(INGRC_JAR_FILE)"

#-------------------------------------------------------------------------------
# Input files - updated by IngeDev
#-------------------------------------------------------------------------------
# XML resource file location
XML_RES_LOCATION= $(SUB_PRJ_NAME)/%XML_RESOURCE_FILE_PATH%

#-------------------------------------------------------------------------------
# Binary result file name
#-------------------------------------------------------------------------------
BIN_RES_FILE    = $(BIN_PATH)/$(TRG_FILE_NAME)

#===============================================================================
# Rule to make the resource - updated by IngeDev
#===============================================================================
$(BIN_RES_FILE): $(XML_RES_LOCATION)
	$(RC) "$<" "$@"
	@$(PRINTF) "'$@' resource file generated.\n"

#===============================================================================
# Rule to display sub-project name and configuration name
#===============================================================================
.PHONY: displayInfo
displayInfo:
	@$(PRINTF) "                                     *-*-*\n"
	@$(PRINTF) "--- Project '$(PROJECT_NAME)', Sub-project '$(SUB_PRJ_NAME)', Configuration '$(CFG_NAME)' ---\n"

#===============================================================================
# Rule to create output directories if it not already exist
#===============================================================================
.PHONY: createOutputDirs
createOutputDirs:
	@$(MKDIR) "$(BIN_PATH)"

#===============================================================================
# Make build rule
#===============================================================================
.PHONY: build
build: displayInfo createOutputDirs $(BIN_RES_FILE)
	@$(PRINTF) "done!\n"

#===============================================================================
# Make clean rule
#===============================================================================
.PHONY: clean
clean: displayInfo
	@$(PRINTF) "deleting intermediate files...\n"
	@$(RM) "$(BIN_RES_FILE)"
	@$(PRINTF) "done!\n"
